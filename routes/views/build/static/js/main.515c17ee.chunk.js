(this.webpackJsonpjournalr=this.webpackJsonpjournalr||[]).push([[0],{219:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),l=n.n(c),o=(n(88),n(5)),u=n.n(o),s=n(10),i=n(82),d=n(17),b=n(18),p=n(20),h=n(19),j=n(14),m=n.n(j),y=n(8),g=n(1);y.a.configure();var v=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.day,a=t.month,r=t.year,c="day "+(0,t.getDayClass)("".concat(a,"/").concat(n,"/").concat(r));return Object(g.jsx)("div",{onClick:function(){return e.showJournal(n,a,r)},className:c,children:Object(g.jsx)("h4",{children:"".concat(n)})})}},{key:"showJournal",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,r,c,l,o,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.day,a=t.month,r=t.year,c=t.pullUpJournal,l=t.changeCurrentJournal,o=t.pullInJournal,s=t.changeCurrentDay,e.prev=1,e.next=4,m.a.get("/journals/".concat(n,"/").concat(a,"/").concat(r));case 4:if(!(i=e.sent).data.error){e.next=7;break}return e.abrupt("return",y.a.error("Could not connect to the server, try again later"));case 7:l(i.data),c(),o(),s("".concat(a,"/").concat(n,"/").concat(r)),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",y.a.error("There was an issue connecting to the server: details: ".concat(e.t0.message,"}")));case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(){return e.apply(this,arguments)}}()}]),n}(a.Component),f=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.month,n=e.year,a=e.days,r=e.getDayClass,c=e.changeCurrentJournal,l=e.pullUpJournal,o=e.pullInJournal,u=e.changeCurrentDay;return Object(g.jsx)("div",{className:"month-grid",children:a.map((function(e){return Object(g.jsx)(v,{changeCurrentDay:u,pullUpJournal:l,pullInJournal:o,changeCurrentJournal:c,getDayClass:r,day:e,month:t,year:n},"".concat(e,"/").concat(t,"/").concat(n))}))})}}]),n}(a.Component);function O(e){var t=e.monthNumber,n=e.year,a={1:"January",2:"Febuary",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[t];return Object(g.jsx)("div",{className:"month-header",children:"".concat(a," ").concat(n)})}function x(e){var t=e.days,n=e.month,a=e.year,r=e.getDayClass,c=e.pullUpJournal,l=e.changeCurrentJournal,o=e.pullInJournal,u=e.changeCurrentDay;return Object(g.jsxs)("div",{className:"month-container",id:"".concat(n,"/").concat(a),children:[Object(g.jsx)(O,{monthNumber:n,year:a}),Object(g.jsx)(f,{pullUpJournal:c,pullInJournal:o,changeCurrentDay:u,changeCurrentJournal:l,getDayClass:r,days:t,month:n,year:a})]})}var J=n(42),w=n.n(J),C=n(83),D=n(24),I=n.n(D),N={1:30,2:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31};function S(e){return e===(new Date).toLocaleDateString()}function k(e,t){return 2===e&&t%4===0?29:N[e]}function U(){return(new Date).toLocaleDateString()}var F=n(25);function Z(e){var t=e.journal.body,n=Object(a.useState)(),r=Object(C.a)(n,2),c=r[0],l=r[1];Object(a.useEffect)((function(){if(!t)return l("# Journal - ".concat(U()));l(t.replace(/\n/g,"  \n"))}),[t]);return Object(g.jsxs)("div",{className:"journal-area",id:"journal-area",style:e.getStyles(),children:[Object(g.jsxs)("div",{className:"journal-area-btn-wrapper",children:[Object(g.jsx)("button",{className:"btn btn-toggle-in",onClick:function(){e.pullInJournal()},children:Object(g.jsx)(F.a,{})}),Object(g.jsx)("button",{className:"btn btn-journal btn-save",onClick:Object(s.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEwNTQ2NTY5NTM3NjM0NzgxMTI0MCIsImVtYWlsIjoic2FhZGtoYWxpZDkxM0BnbWFpbC5jb20iLCJ2ZXJpZmllZF9lbWFpbCI6dHJ1ZSwibmFtZSI6IlNhYWQgS2hhbGlkIiwiZ2l2ZW5fbmFtZSI6IlNhYWQiLCJmYW1pbHlfbmFtZSI6IktoYWxpZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHamZYTi1JU0ZxSzkySU9RdlhJLUh4R1doLS1MeWREelYyaWJRYmg2UFE9czk2LWMiLCJsb2NhbGUiOiJlbiIsImlhdCI6MTYyODAzOTgxMH0.x6TeRZPWFTZErYHRTB87oQs7BRZ0EWQKvSKl0mtnY64",S(e.selectedDay)||y.a.error("Error: Selected day must be current day"),t.prev=2,t.next=5,m.a.post("/journals",{body:c,timeStamp:(new Date).toLocaleDateString()});case 5:if(!(n=t.sent).data.error){t.next=8;break}return t.abrupt("return",y.a.error("There was an error on the serverside, details: ".concat(n.data.error)));case 8:e.addItem(n.data.timeStamp),e.pullInJournal(),t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",y.a.error("There was an error, details: ".concat(t.t0.message)));case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),children:"Save"})]}),Object(g.jsxs)("div",{className:"md-area-wrapper",children:[Object(g.jsx)("textarea",{autoFocus:!0,value:c,onChange:function(e){return l(e.target.value)},className:"md-area md-textarea"}),Object(g.jsx)(I.a,{children:c,className:"md-preview md-area"})]})]})}y.a.configure();var Y=function(e){var t=e.getStyles,n=e.pullDown,a=e.pullOutJournal,r=e.pullUpFully,c=e.text;return S(e.selectedDay)?Object(g.jsxs)("div",{className:"journal-view",style:t(),children:[Object(g.jsx)("button",{onClick:r,className:"btn btn-journal btn-up",children:Object(g.jsx)(F.b,{})}),Object(g.jsxs)("div",{className:"btn-wrapper",children:[Object(g.jsx)("button",{className:"btn btn-edit btn-journal",onClick:function(){a(),n()},children:"Edit"}),Object(g.jsx)("button",{className:"btn btn-journal btn-close",onClick:n,children:"Close"})]}),Object(g.jsx)(I.a,{children:c.body||"# Nothing to see here!",className:"md-journal-view"})]}):Object(g.jsxs)("div",{className:"journal-view",style:t(),children:[Object(g.jsx)("button",{onClick:r,className:"btn btn-journal btn-up",children:Object(g.jsx)(F.b,{})}),Object(g.jsx)("div",{className:"btn-wrapper",children:Object(g.jsx)("button",{className:"btn btn-journal btn-close",onClick:n,children:"Close"})}),Object(g.jsx)(I.a,{children:c.body||"# Nothing to see here!",className:"md-journal-view"})]})};y.a.configure();var M=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={dates:[],showJournalWindow:!1,currentJournal:{},pulledDown:!0,pulledUpFully:!1,editingJournal:!1,selectedDay:"1/1/1970"},e.addItem=function(t){var n=Object(i.a)(e.state.dates);n.push(t),e.setState({dates:n})},e.changeCurrentDay=function(t){e.setState({selectedDay:t})},e.GetJournalDates=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/journals/dates").catch();case 2:if(!(t=e.sent).data.error){e.next=5;break}return e.abrupt("return",y.a.error("There was an issue connecting to the server"));case 5:return e.abrupt("return",t.data.map((function(e){return new Date(Date.parse(e)).toLocaleDateString()})));case 6:case"end":return e.stop()}}),e)}))),e.pullOutJournal=function(){e.setState({editingJournal:!0})},e.pullInJournal=function(){e.setState({editingJournal:!1})},e.getDayClass=function(t){var n="";return e.state.dates?(t===U()&&(n+=" current-day"),e.state.dates.includes(t)&&(n+=" completed-day"),n):""},e.journalAreaStyles=function(){return e.state.editingJournal?{bottom:"0%"}:{}},e.pullDown=function(){e.setState({pulledDown:!0,pulledUpFully:!1})},e.pullUp=function(){e.setState({pulledDown:!1})},e.pullUpFully=function(){e.setState({pulledDown:!1,pulledUpFully:!0})},e.getStyles=function(){return e.state.pulledDown?{bottom:"-100%"}:e.state.pulledUpFully?{bottom:"0%"}:{bottom:"-20%"}},e.changeCurrentJournal=function(t){e.setState({currentJournal:t})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetJournalDates();case 2:t=e.sent,this.setState({dates:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.year,n=w.a.range(1,13,1);return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)("div",{className:"calendar",children:n.map((function(n){return Object(g.jsx)(x,{changeCurrentDay:e.changeCurrentDay,pullInJournal:e.pullInJournal,pullUpJournal:e.pullUp,changeCurrentJournal:e.changeCurrentJournal,getDayClass:e.getDayClass,year:t,month:n,days:w.a.range(1,k(n,t)+1,1)},"".concat(n,"/").concat(t))}))}),Object(g.jsx)(Z,{selectedDay:this.state.selectedDay,getStyles:this.journalAreaStyles,pullInJournal:this.pullInJournal,journal:this.state.currentJournal,addItem:this.addItem}),Object(g.jsx)(Y,{pullUpFully:this.pullUpFully,selectedDay:this.state.selectedDay,journal:this.state.currentJournal,pullOutJournal:this.pullOutJournal,getStyles:this.getStyles,pullDown:this.pullDown,text:this.state.currentJournal})]})}}]),n}(a.Component);function T(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;window.location="/#".concat(n,"/").concat(t)}var W=function(e){var t=e.imgSrc,n=e.imgAlt,a=e.imgHref,r=e.handleButton;return Object(g.jsxs)("div",{className:"navbar",children:[Object(g.jsx)("img",{onClick:a,className:"navbar-img",src:t,alt:n}),Object(g.jsx)("button",{className:"btn btn-journal btn-logout",onClick:r,children:"Log Out"})]})},L=n.p+"static/media/Journalr.bd6cbb0c.svg";function R(){return(R=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/login/verify").catch((function(e){return window.location="/login"}));case 2:if(e.sent.data.success){e.next=5;break}return e.abrupt("return",window.location="/login");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){return R.apply(this,arguments)};n(218);A(),T(),l.a.render(Object(g.jsxs)(r.a.StrictMode,{children:[Object(g.jsx)(W,{imgSrc:L,imgHref:T,imgAlt:"JournalR Logo",handleButton:function(){document.cookie="",window.location="/login"}}),Object(g.jsx)(M,{year:2021})]}),document.getElementById("root"))},88:function(e,t,n){}},[[219,1,2]]]);
//# sourceMappingURL=main.515c17ee.chunk.js.map